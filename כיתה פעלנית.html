<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×¤×¢×™×œ×•×ª ××™×•×Ÿ: ×¨×•××™×, ×©×•××¢×™× ×•××¨×’×™×©×™× ×‘×›×™×ª×” ×¤×¢×œ× ×™×ª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap');
        body {
            font-family: 'Assistant', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .card {
            touch-action: none;
            cursor: grab;
            user-select: none;
            transition: all 0.2s ease-in-out;
            border-right: 4px solid transparent;
            background: white;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .card:active {
            cursor: grabbing;
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            z-index: 1000;
        }
        .drop-zone {
            transition: all 0.3s ease-in-out;
            min-height: 250px;
            background: white;
        }
        .drag-over {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        #see.drag-over { 
            background: linear-gradient(to bottom, #e6f2ff, white);
            border-color: #007bff; 
        }
        #hear.drag-over { 
            background: linear-gradient(to bottom, #e9f7eb, white);
            border-color: #28a745; 
        }
        #feel.drag-over { 
            background: linear-gradient(to bottom, #fff8e1, white);
            border-color: #ffc107; 
        }
        
        .correct { 
            border-right-color: #28a745 !important; 
            background: linear-gradient(to right, #e9f7eb, white) !important;
            animation: correctPulse 0.5s ease-in-out;
        }
        .incorrect { 
            border-right-color: #dc3545 !important; 
            background: linear-gradient(to right, #f8d7da, white) !important;
            animation: incorrectShake 0.5s ease-in-out;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .stats {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .category-counter {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8 bg-white rounded-xl shadow-lg p-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">××™×•×Ÿ ×‘×™×˜×•×™×™ ×¤×¢×œ× ×•×ª ×‘×›×™×ª×”</h1>
            <p class="text-lg text-gray-600">×’×¨×¨×• ×›×œ ×”×™×’×“ ×œ×§×˜×’×•×¨×™×” ×”××ª××™××” - ××” ×¨×•××™×, ×©×•××¢×™× ××• ××¨×’×™×©×™× ×‘×›×™×ª×” ×¤×¢×œ× ×™×ª?</p>
            <div id="stats" class="stats mt-4 p-4 bg-purple-50 rounded-lg inline-block">
                <span class="text-lg font-semibold">×ª×•×¦××”: </span>
                <span id="score" class="text-2xl font-bold text-green-600"></span>
                <div id="feedback" class="text-sm mt-2"></div>
            </div>
        </header>

        <main>
            <!-- Unsorted Cards Bank -->
            <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-700 mb-4 text-center">ğŸ¯ ×”×™×’×“×™× ×œ××™×•×Ÿ</h2>
                <div class="text-center text-sm text-gray-500 mb-4">
                    <span id="remaining-cards">× ×•×ª×¨×•: 0 ×›×¨×˜×™×¡×™×</span>
                </div>
                <div id="card-bank" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto p-2">
                    <!-- Cards will be dynamically inserted here by JS -->
                </div>
            </div>

            <!-- Drop Zones -->
            <div class="grid lg:grid-cols-3 gap-6">
                <div id="see" data-category="see" class="drop-zone p-6 rounded-xl shadow-lg border-t-4 border-blue-500">
                    <h3 class="text-2xl font-bold text-center text-blue-600 mb-4">ğŸ‘ï¸ ××” ×¨×•××™×</h3>
                    <div class="category-counter text-center text-gray-500">0 ×¤×¨×™×˜×™×</div>
                    <div class="space-y-3 mt-4"></div>
                </div>
                <div id="hear" data-category="hear" class="drop-zone p-6 rounded-xl shadow-lg border-t-4 border-green-500">
                    <h3 class="text-2xl font-bold text-center text-green-600 mb-4">ğŸ‘‚ ××” ×©×•××¢×™×</h3>
                    <div class="category-counter text-center text-gray-500">0 ×¤×¨×™×˜×™×</div>
                    <div class="space-y-3 mt-4"></div>
                </div>
                <div id="feel" data-category="feel" class="drop-zone p-6 rounded-xl shadow-lg border-t-4 border-yellow-500">
                    <h3 class="text-2xl font-bold text-center text-yellow-600 mb-4">ğŸ’š ××” ××¨×’×™×©×™×</h3>
                    <div class="category-counter text-center text-gray-500">0 ×¤×¨×™×˜×™×</div>
                    <div class="space-y-3 mt-4"></div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="mt-8 flex justify-center gap-4">
                <button id="check-btn" class="bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    âœ”ï¸ ×‘×“×™×§×”
                </button>
                <button id="reset-btn" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    ğŸ”„ ××™×¤×•×¡
                </button>
                <button id="hint-btn" class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    ğŸ’¡ ×¨××–
                </button>
            </div>
        </main>
    </div>

    <script>
        const cardsData = [
            // ×¨×•××™× - ×”×™×’×“×™× ×§×•× ×§×¨×˜×™×™× ××”×’×¨×¡×” ×”××§×•×¨×™×ª
            { id: 's1', category: 'see', text: '× ×•×¢×” ××›×™×ª×” ×“×³ ×›×•×ª×‘×ª ×¢×œ ×”×œ×•×— "× ×•×©××™× ×œ×—×§×¨" ×•××–××™× ×” ×—×‘×¨×™× ×œ×”×•×¡×™×£' },
            { id: 's2', category: 'see', text: '×©×œ×•×©×” ×ª×œ××™×“×™× ×‘×•× ×™× ××©×—×§ ××ª××˜×™×§×” ××©×œ×”× ×¢× ×§×•×¤×¡×ª × ×¢×œ×™×™×' },
            { id: 's3', category: 'see', text: '×¢×œ ×”×§×™×¨ ×ª×œ×•×™ ×œ×•×— "×× ×—× ×• ×‘×•×—×¨×™×" ×¢× ×”×¦×‘×¢×•×ª ×©×œ ×”×ª×œ××™×“×™×' },
            { id: 's4', category: 'see', text: '×™×œ×“×” ××¡×‘×™×¨×” ×œ×™×œ×“ ××—×¨ ××™×š ×œ×¤×ª×•×¨ ×ª×¨×’×™×œ ×‘×“×¨×š ×©×œ×”' },
            { id: 's5', category: 'see', text: '×ª×œ××™×“×™× ×–×–×™× ×‘×›×™×ª×” ×‘×™×Ÿ ×ª×—× ×•×ª ×œ××™×“×” ×©×”× ×”×›×™× ×•' },
            { id: 's6', category: 'see', text: '×¤×™× ×ª "×”××•××—×™× ×©×œ× ×•" - ×›×œ ×ª×œ××™×“ ×¨×©× ×‘××” ×™×›×•×œ ×œ×¢×–×•×¨' },
            
            // ×¨×•××™× - ×ª×•×¡×¤×•×ª ×—×“×©×•×ª ××”×¨×©×™××”
            { id: 's7', category: 'see', text: '×œ×•×— ×‘×—×™×¨×” ×¢× ××¤×©×¨×•×™×•×ª ×©×•× ×•×ª ×œ××©×™××•×ª' },
            { id: 's8', category: 'see', text: '×¤×™× ×•×ª ×¢×‘×•×“×” ×©×ª×œ××™×“×™× ×™×¦×¨×• ×•×¢×™×¦×‘×•' },
            { id: 's9', category: 'see', text: '×ª×•×¦×¨×™× ××’×•×•× ×™× ×©×œ ×ª×œ××™×“×™× ×¢×œ ×”×§×™×¨×•×ª' },
            { id: 's10', category: 'see', text: '×©×œ×˜×™× ×©×ª×œ××™×“×™× ×”×›×™× ×• ×œ×›×œ×œ×™ ×”×›×™×ª×”' },
            { id: 's11', category: 'see', text: '×ª×™×‘×ª ×”×¦×¢×•×ª ×¤×¢×™×œ×” ×¢×œ ×”×©×•×œ×—×Ÿ' },
            { id: 's12', category: 'see', text: '×ª×œ××™×“×™× ×¢×•×‘×“×™× ×‘×§×‘×•×¦×•×ª ×©×”× ×‘×—×¨×•' },
            { id: 's13', category: 'see', text: '×ª×œ××™×“×™× ××¦×™×’×™× ×¨×¢×™×•× ×•×ª ×‘×‘×™×˜×—×•×Ÿ ××•×œ ×”×›×™×ª×”' },
            { id: 's14', category: 'see', text: '×™×œ×“×™× ××ª× ×“×‘×™× ×œ×ª×¤×§×™×“×™× ×©×•× ×™×' },
            { id: 's15', category: 'see', text: '×”××•×¨×” ×™×•×©×‘×ª ×‘×’×•×‘×” ×”×¢×™× ×™×™× ×©×œ ×”×ª×œ××™×“×™×' },
            { id: 's16', category: 'see', text: '×”××•×¨×” ×¨×•×©××ª ×¨×¢×™×•× ×•×ª ×©×œ ×ª×œ××™×“×™× ×¢×œ ×”×œ×•×—' },
            { id: 's17', category: 'see', text: '×”××•×¨×” ××¦×˜×¨×¤×ª ×œ×§×‘×•×¦×” ×›××©×ª×ª×¤×ª' },
            { id: 's18', category: 'see', text: '×™×œ×“×™× ××ª×›× × ×™× ×¤×¨×•×™×§×˜ ×¢×œ ×¤×•×¡×˜×¨ ×’×“×•×œ' },
            { id: 's19', category: 'see', text: '×ª×œ××™×“×™× ×‘×•×“×§×™× ×¢×‘×•×“×•×ª ×©×œ ×—×‘×¨×™×' },
            { id: 's20', category: 'see', text: '×ª×™×¢×•×“ ×©×œ ×ª×”×œ×™×š ×œ××™×“×” ×¢×œ ×”×§×™×¨' },

            // ×©×•××¢×™× - ×“×™××œ×•×’×™× ××”×’×¨×¡×” ×”××§×•×¨×™×ª
            { id: 'h1', category: 'hear', text: '"×”××•×¨×”, ×™×© ×œ×™ ×¨×¢×™×•×Ÿ! ××” ×× ×‘××§×•× ×“×£ ×¢×‘×•×“×” × ×¢×©×” ×—×™×“×•×Ÿ?"' },
            { id: 'h2', category: 'hear', text: '"×× ×™ ××—×¨××™ ×¢×œ ×”×¦×‘×¢×™×, ××ª ×¢×œ ×”×›×ª×™×‘×”, ×”×•× ×™×—×¤×© ××™×“×¢"' },
            { id: 'h3', category: 'hear', text: '×”××•×¨×”: "×™×© ×›××Ÿ ×‘×¢×™×” ××¢× ×™×™× ×ª. ××™ ×¨×•×¦×” ×œ×”×•×‘×™×œ?"' },
            { id: 'h4', category: 'hear', text: '"×¨×’×¢! ×™×© ×œ×™ ×“×¨×š ××—×¨×ª! ×ª× ×• ×œ×™ ×œ×”×¨××•×ª ×¢×œ ×”×œ×•×—!"' },
            { id: 'h5', category: 'hear', text: '"×”×—×œ×˜× ×• ×©×›×œ ×™×•× ××™×©×”×• ××—×¨ ××—×¨××™ ×¢×œ ×”×¡×¤×¨×™×™×”"' },
            { id: 'h6', category: 'hear', text: '"×‘×•××• × ×¦×‘×™×¢ - ××™ ×‘×¢×“ ×œ×©× ×•×ª ××ª ××§×•× ×”×©×•×œ×—× ×•×ª?"' },
            
            // ×©×•××¢×™× - ×ª×•×¡×¤×•×ª ×—×“×©×•×ª
            { id: 'h7', category: 'hear', text: '"×× ×™ ×—×•×©×‘ ×©..."' },
            { id: 'h8', category: 'hear', text: '"××¤×©×¨ ×œ× ×¡×•×ª ××—×¨×ª?"' },
            { id: 'h9', category: 'hear', text: '"×‘×•× × ×¢×©×” ××ª ×–×” ×‘×™×—×“"' },
            { id: 'h10', category: 'hear', text: '"×× ×™ ×™×›×•×œ ×œ×”×¡×‘×™×¨ ××ª ×”×“×¨×š ×©×œ×™"' },
            { id: 'h11', category: 'hear', text: '"××” ×× × ×©× ×” ××ª ×”×›×œ×œ×™×?"' },
            { id: 'h12', category: 'hear', text: '"×× ×™ ×œ× ××¡×›×™× ×›×™..."' },
            { id: 'h13', category: 'hear', text: '"×œ××“×ª×™ ××©×”×• ×—×“×© ×”×™×•×!"' },
            { id: 'h14', category: 'hear', text: '×”××•×¨×”: "××” ××ª× ×—×•×©×‘×™× ×¢×œ ×–×”?"' },
            { id: 'h15', category: 'hear', text: '×”××•×¨×”: "××™×š ×ª×¨×¦×• ×œ×¢×©×•×ª ××ª ×”××©×™××”?"' },
            { id: 'h16', category: 'hear', text: '×”××•×¨×”: "×¡×¤×¨×• ×œ×™ ×¢×•×“ ×¢×œ ×”×¨×¢×™×•×Ÿ ×©×œ×›×"' },
            { id: 'h17', category: 'hear', text: '×”××•×¨×”: "×˜×¢×•×ª ××¢× ×™×™× ×ª, ×‘×•××• × ×‘×™×Ÿ ××•×ª×”"' },
            { id: 'h18', category: 'hear', text: '×“×™×•× ×™× ×¢×¨×™× ×‘×§×‘×•×¦×•×ª ×”×©×•× ×•×ª' },
            { id: 'h19', category: 'hear', text: '×¦×—×•×§ ××©×•×ª×£ ×›×©××™×©×”×• ×˜×•×¢×”' },
            { id: 'h20', category: 'hear', text: '××—×™××•×ª ×›×¤×™×™× ×œ×”×¦×œ×—×” ×©×œ ×—×‘×¨' },

            // ××¨×’×™×©×™× - ×ª×—×•×©×•×ª ××”×’×¨×¡×” ×”××§×•×¨×™×ª
            { id: 'f1', category: 'feel', text: '×”×ª×¨×’×©×•×ª ×›×©×”×¨×¢×™×•×Ÿ ×©×œ×™ × ×‘×—×¨ ×œ×”×™×•×ª ×”×¤×¨×•×™×§×˜ ×”×›×™×ª×ª×™' },
            { id: 'f2', category: 'feel', text: '×”×§×œ×” ×©××•×ª×¨ ×œ×¤×ª×•×¨ ××ª ×”××©×™××” ×‘×“×¨×š ×©××ª××™××” ×œ×™' },
            { id: 'f3', category: 'feel', text: '×’××•×•×” ×›×©×—×‘×¨ ××‘×§×© ×©××œ××“ ××•×ª×• ××ª ×”×©×™×˜×” ×©×œ×™' },
            { id: 'f4', category: 'feel', text: '×‘×™×˜×—×•×Ÿ ×œ×•××¨ "×× ×™ ×œ× ××‘×™×Ÿ" ×•×œ×“×¢×ª ×©×™×¢×–×¨×• ×œ×™' },
            { id: 'f5', category: 'feel', text: '×©××—×” ×©×”××•×¨×” ×‘×××ª ×”×§×©×™×‘×” ×•×‘×™×¦×¢×” ××ª ×”×”×¦×¢×” ×©×œ× ×•' },
            { id: 'f6', category: 'feel', text: '×ª×—×•×©×ª ×©×™×™×›×•×ª ×›×©×›×•×œ× ×ª×•×¨××™× ×¨×¢×™×•× ×•×ª ×œ×¤×¢×™×œ×•×ª' },
            
            // ××¨×’×™×©×™× - ×ª×•×¡×¤×•×ª ×—×“×©×•×ª
            { id: 'f7', category: 'feel', text: '×× ×™ ×—×©×•×‘ ×›××Ÿ ×•×™×© ×œ×™ ××§×•×' },
            { id: 'f8', category: 'feel', text: '×”×§×•×œ ×©×œ×™ × ×©××¢ ×•××§×©×™×‘×™× ×œ×™' },
            { id: 'f9', category: 'feel', text: '××•×ª×¨ ×œ×™ ×œ×˜×¢×•×ª ×•×œ×œ××•×“ ××–×”' },
            { id: 'f10', category: 'feel', text: '×× ×™ ×™×›×•×œ ×œ×”×©×¤×™×¢ ×¢×œ ××” ×©×§×•×¨×”' },
            { id: 'f11', category: 'feel', text: '×™×© ×œ×™ ××—×¨×™×•×ª ×¢×œ ×”×œ××™×“×” ×©×œ×™' },
            { id: 'f12', category: 'feel', text: '×¡×•××›×™× ×¢×œ×™ ×œ×§×‘×œ ×”×—×œ×˜×•×ª' },
            { id: 'f13', category: 'feel', text: '×¡×§×¨× ×•×ª ×œ×’×œ×•×ª ×“×‘×¨×™× ×—×“×©×™×' },
            { id: 'f14', category: 'feel', text: '× ×•×—×•×ª ×œ×©××•×œ ×©××œ×•×ª' },
            { id: 'f15', category: 'feel', text: '×× ×¨×’×™×” ×©×œ ×™×¦×™×¨×” ×•×”××¦××”' },
            { id: 'f16', category: 'feel', text: '×›×™×£ ×œ×‘×—×•×¨ ××™×š ×œ×œ××•×“' },
            { id: 'f17', category: 'feel', text: '××ª×— ×—×™×•×‘×™ ×›×©×™×© ××ª×’×¨ ×—×“×©' },
            { id: 'f18', category: 'feel', text: '×¡×™×¤×•×§ ××”×¦×œ×—×” ××©×•×ª×¤×ª ×©×œ ×”×§×‘×•×¦×”' },
            { id: 'f19', category: 'feel', text: '×¨×¦×•×Ÿ ×œ×©×ª×£ ××ª ××” ×©×œ××“×ª×™' },
            { id: 'f20', category: 'feel', text: '×—×•×¤×© ×œ× ×¡×•×ª ×“×¨×›×™× ×©×•× ×•×ª' }
        ];

        const cardBank = document.getElementById('card-bank');
        const dropZones = document.querySelectorAll('.drop-zone');
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        const hintBtn = document.getElementById('hint-btn');
        const statsDiv = document.getElementById('stats');
        const scoreSpan = document.getElementById('score');
        const feedbackDiv = document.getElementById('feedback');
        const remainingSpan = document.getElementById('remaining-cards');

        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        function updateCounters() {
            // Update remaining cards counter
            const remainingCards = cardBank.querySelectorAll('.card').length;
            remainingSpan.textContent = `× ×•×ª×¨×•: ${remainingCards} ×›×¨×˜×™×¡×™×`;
            
            // Update category counters
            dropZones.forEach(zone => {
                const count = zone.querySelectorAll('.card').length;
                const counter = zone.querySelector('.category-counter');
                counter.textContent = `${count} ×¤×¨×™×˜×™×`;
            });
        }
        
        function initializeCards() {
            // Clear everything
            cardBank.innerHTML = '';
            dropZones.forEach(zone => {
                zone.querySelector('div:last-child').innerHTML = '';
            });
            
            // Hide stats
            statsDiv.style.display = 'none';
            
            // Add cards in random order
            const shuffled = shuffle(cardsData);
            shuffled.forEach(card => {
                const cardElement = createCardElement(card);
                cardBank.appendChild(cardElement);
            });
            
            // Add drag listeners
            addDragListeners();
            
            // Update counters
            updateCounters();
        }

        function createCardElement(cardData) {
            const cardElement = document.createElement('div');
            cardElement.id = cardData.id;
            cardElement.setAttribute('data-category', cardData.category);
            cardElement.setAttribute('draggable', 'true');
            cardElement.className = 'card p-3 rounded-lg shadow-md border border-gray-200 hover:shadow-lg';
            cardElement.innerHTML = `<p class="text-gray-800 text-sm">${cardData.text}</p>`;
            return cardElement;
        }

        function addDragListeners() {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
                
                // Touch support
                card.addEventListener('touchstart', handleTouchStart, {passive: false});
                card.addEventListener('touchmove', handleTouchMove, {passive: false});
                card.addEventListener('touchend', handleTouchEnd);
            });
        }
        
        let draggedElement = null;
        
        function handleDragStart(e) {
            draggedElement = e.target;
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', e.target.innerHTML);
            setTimeout(() => {
                e.target.classList.add('opacity-50');
            }, 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('opacity-50');
            draggedElement = null;
            updateCounters();
        }

        // Touch handlers for mobile
        let touchItem = null;
        let touchOffset = {x: 0, y: 0};
        
        function handleTouchStart(e) {
            touchItem = e.target.closest('.card');
            if (!touchItem) return;
            
            const touch = e.touches[0];
            const rect = touchItem.getBoundingClientRect();
            touchOffset = {
                x: touch.clientX - rect.left,
                y: touch.clientY - rect.top
            };
            
            touchItem.style.position = 'fixed';
            touchItem.style.zIndex = '1000';
            touchItem.style.opacity = '0.8';
            e.preventDefault();
        }
        
        function handleTouchMove(e) {
            if (!touchItem) return;
            const touch = e.touches[0];
            touchItem.style.left = (touch.clientX - touchOffset.x) + 'px';
            touchItem.style.top = (touch.clientY - touchOffset.y) + 'px';
            e.preventDefault();
        }
        
        function handleTouchEnd(e) {
            if (!touchItem) return;
            
            const changedTouch = e.changedTouches[0];
            const elem = document.elementFromPoint(changedTouch.clientX, changedTouch.clientY);
            const dropZone = elem?.closest('.drop-zone');
            
            if (dropZone) {
                dropZone.querySelector('div:last-child').appendChild(touchItem);
            }
            
            touchItem.style.position = '';
            touchItem.style.zIndex = '';
            touchItem.style.opacity = '';
            touchItem.style.left = '';
            touchItem.style.top = '';
            touchItem = null;
            
            updateCounters();
        }

        // Drop zone handlers
        dropZones.forEach(zone => {
            zone.addEventListener('dragover', handleDragOver);
            zone.addEventListener('drop', handleDrop);
            zone.addEventListener('dragleave', handleDragLeave);
        });

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            this.classList.add('drag-over');
            return false;
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            e.preventDefault();
            
            this.classList.remove('drag-over');
            
            if (draggedElement && draggedElement !== this) {
                this.querySelector('div:last-child').appendChild(draggedElement);
                updateCounters();
            }
            
            return false;
        }
        
        // Check button functionality
        checkBtn.addEventListener('click', () => {
            let correct = 0;
            let total = 0;
            
            // Remove old classes
            const allCards = document.querySelectorAll('.card');
            allCards.forEach(card => {
                card.classList.remove('correct', 'incorrect');
            });
            
            // Check each zone
            dropZones.forEach(zone => {
                const zoneCategory = zone.dataset.category;
                const placedCards = zone.querySelectorAll('.card');
                
                placedCards.forEach(card => {
                    total++;
                    if (card.dataset.category === zoneCategory) {
                        card.classList.add('correct');
                        correct++;
                    } else {
                        card.classList.add('incorrect');
                    }
                });
            });
            
            // Show score and feedback
            if (total > 0) {
                scoreSpan.textContent = `${correct} / ${total}`;
                const percentage = Math.round((correct / total) * 100);
                
                let feedback = '';
                if (percentage === 100) {
                    feedback = 'ğŸŒŸ ××¦×•×™×Ÿ! ×–×™×”×™×ª × ×›×•×Ÿ ××ª ×›×œ ×”×¡×™×× ×™× ×©×œ ×›×™×ª×” ×¤×¢×œ× ×™×ª!';
                } else if (percentage >= 80) {
                    feedback = 'ğŸ‘ ×›×œ ×”×›×‘×•×“! ×¨×•×‘ ×”×ª×©×•×‘×•×ª × ×›×•× ×•×ª';
                } else if (percentage >= 60) {
                    feedback = 'ğŸ’ª ×™×•×¤×™! ×™×© ×”×‘× ×” ×˜×•×‘×”, × ×¡×• ×©×•×‘';
                } else {
                    feedback = 'ğŸ¯ ×›×“××™ ×œ×—×©×•×‘ ×©×•×‘ ×¢×œ ×”×—×œ×•×§×” ×‘×™×Ÿ ×”×§×˜×’×•×¨×™×•×ª';
                }
                
                feedbackDiv.textContent = feedback;
                statsDiv.style.display = 'inline-block';
            }
        });

        // Reset button
        resetBtn.addEventListener('click', () => {
            const allCards = document.querySelectorAll('.card');
            allCards.forEach(card => {
                card.classList.remove('correct', 'incorrect');
            });
            initializeCards();
        });
        
        // Hint button
        hintBtn.addEventListener('click', () => {
            const unplacedCards = cardBank.querySelectorAll('.card');
            if (unplacedCards.length > 0) {
                // Take random unplaced card
                const randomCard = unplacedCards[Math.floor(Math.random() * unplacedCards.length)];
                const correctCategory = randomCard.dataset.category;
                
                // Highlight the correct zone briefly
                const correctZone = document.getElementById(correctCategory);
                correctZone.style.background = correctCategory === 'see' ? '#e6f2ff' :
                                               correctCategory === 'hear' ? '#e9f7eb' : '#fff8e1';
                                               
                randomCard.style.border = '2px solid orange';
                
                setTimeout(() => {
                    correctZone.style.background = '';
                    randomCard.style.border = '';
                }, 2000);
            } else {
                alert('×›×œ ×”×›×¨×˜×™×¡×™× ×›×‘×¨ ×××•×™× ×™×! ×œ×—×¦×• ×¢×œ "×‘×“×™×§×”" ×›×“×™ ×œ×¨××•×ª ××ª ×”×ª×•×¦××•×ª');
            }
        });

        // Initial setup
        initializeCards();
    </script>
</body>
</html>
