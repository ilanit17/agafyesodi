<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>כלי לניהול שיח בין מדריכת הכלה למנהל/ת בית ספר</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Font for Hebrew -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles for font and printing -->
    <style>
        body {
            font-family: 'Assistant', sans-serif;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 240px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -120px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        @media print {
            body {
                background-color: white !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .no-print {
                display: none !important;
            }
            .print-container {
                max-width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            .print-content {
                box-shadow: none !important;
                border: none !important;
                padding: 1rem !important;
            }
            .page-break-inside-avoid {
                page-break-inside: avoid;
            }
            .tooltip {
                border-bottom: none;
            }
            .tooltip .tooltiptext {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="root"></div>

    <!-- React Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel to transpile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const Tooltip = ({ text, children }) => (
        <span className="tooltip" style={{borderBottom: '1px dotted black'}}>
          {children}
          <span className="tooltiptext">{text}</span>
        </span>
      );

      const InclusionPlanningTool = () => {
        const [view, setView] = useState('initial'); // initial, domains, additionalData, summary
        const [currentDomain, setCurrentDomain] = useState(0);
        const [selectedItems, setSelectedItems] = useState({});
        const [selectedPractices, setSelectedPractices] = useState({});
        const [customPractices, setCustomPractices] = useState({});
        
        const [schoolName, setSchoolName] = useState('');
        const [principalName, setPrincipalName] = useState('');
        const [mentorName, setMentorName] = useState('');
        const [coordinatorName, setCoordinatorName] = useState('');
        const [guidanceHours, setGuidanceHours] = useState('');
        const [guidanceYears, setGuidanceYears] = useState('');
        const [schoolData, setSchoolData] = useState('');
        const [challenges, setChallenges] = useState('');
        const [additionalResources, setAdditionalResources] = useState('');

        const [globalPartners, setGlobalPartners] = useState({});
        const [customGlobalPartner, setCustomGlobalPartner] = useState('');
        const [selectedTrainingPractices, setSelectedTrainingPractices] = useState({});
        
        const contentRef = useRef(null);

        const partnersList = [
            'מנהל/ת בית ספר', 'רכזת הכלה', 'מדריכת הכלה', 'רכזת הערכה ומדידה', 
            'רכזת פדגוגית', 'יועצת בית הספר', 'סגן/ית מנהל/ת בית הספר', 
            'מחנכת הכיתה', 'פסיכולוגית', 'מורה מקצועית', 'מורת שילוב'
        ];

        const teacherTrainingPractices = [
            'ליווי מורות בצוות החינוכי בתכנון השיעור', 'חשיפת והדגמת מתודות בחדר המורים',
            'צפייה בשיעורים ומתן משוב', 'יצירת קהילה עם תהליכי רפלקציה',
            'מודלינג', 'הליכה לימודית', 'ליווי מנהיגות הביניים בהובלת תהליכים', 'אחר'
        ];
        
        const domains = [
          {
            id: 'arena1',
            title: 'הל"ה בכיתה ההטרוגנית',
            subtopics: [
              {
                id: 'planning_instruction',
                title: 'תכנון הוראה מכוונת שונות וצורך (עיצוב אוניברסלי ללמידה)',
                expectedOutcomes: [
                  { text: 'העלאת אחוז התלמידים המעורבים ופעילים בשיעור' },
                  { 
                    text: 'עלייה באחוז המורות המדווחות על שימוש במתודות המזמנות מעורבות מתמשכת בשיעור:', 
                    selectablePractices: ['פרקטיקות המקדמות הוראה מפורשת', 'פרקטיקות המקדמות למידה פעילה ומפחיתות מע"מ', 'פרקטיקות המקדמות הסרת חסמי למידה ומעורבות', 'פרקטיקות לקידום תפקודים ניהוליים', 'אחר'] 
                  },
                  { text: 'עלייה באחוז המורות המדווחות על תכנון השיעורים בהתאמה לעקרונות ה-UDL (קישור לכלי תכנון שיעור UDL)' },
                  { text: 'שיפור בהישגים של תלמידים במיקוד' }
                ]
              },
              {
                id: 'pedagogical_flexibility',
                title: 'גמישות פדגוגית (4 המארגנים)',
                expectedOutcomes: [
                  { 
                    text: 'עלייה באחוז המורים המדווחים על שימוש רב יותר בעקרונות של גמישות פדגוגית ותכנון יום ושבוע הלמידה:', 
                    selectablePractices: ['פרקטיקות המקדמות למידה בהרכבים שונים (ארגון הלומדים)', 'פרקטיקות המקדמות למידה במרחבים שונים (ארגון המרחב)', 'פרקטיקות לארגון זמן הלמידה', 'פרקטיקות לארגון תכני הלמידה', 'אחר']
                  }
                ]
              },
              {
                id: 'classroom_management',
                title: 'ניהול כיתה',
                expectedOutcomes: [
                  { text: 'עלייה באחוז המורים המדווחים על תחושת מסוגלות גבוהה יותר לניהול כיתה הטרוגנית' },
                  { text: 'ירידה באחוז התלמידים המושעים' },
                  { 
                    text: 'עלייה באחוז המורות המדווחות על שימוש במתודות המזמנות מעורבות מתמשכת בשיעור:',
                    selectablePractices: ['פרקטיקות המקדמות למידה פעילה ומפחיתות מע"מ', 'פרקטיקות המקדמות הסרת חסמי למידה ומעורבות', 'פרקטיקות לקידום תפקודים ניהוליים', 'פרקטיקות המקדמות למידה בהרכבים שונים', 'כלי לתכנון שיעור מבוסס תפיסת UDL', 'פרקטיקות לעבודה עם תלמידים מאתגרים', 'אחר']
                  }
                ]
              },
              {
                id: 'inclusive_practices_application',
                title: 'יישום פרקטיקות מכלילות',
                expectedOutcomes: [
                  { 
                    text: 'עלייה במספר המורים המיישמים פרקטיקות מכלילות באופן עקבי:', 
                    selectablePractices: ['פרקטיקות המקדמות הוראה מפורשת', 'פרקטיקות המקדמות למידה פעילה ומפחיתות מע"מ', 'פרקטיקות המקדמות הסרת חסמי למידה ומעורבות', 'פרקטיקות המקדמות משוב והערכה מכווני שונות', 'פרקטיקות לקידום תפקודים ניהוליים', 'פרקטיקות להעמדת ההיכרות ההוליסטית עם התלמיד', 'פרקטיקות לקידום מוטיבציה', 'פרקטיקות לקידום שיח פדגוגי', 'אחר'] 
                  }
                ]
              },
              {
                id: 'assessment_feedback',
                title: 'משוב והערכה מכווני שונות',
                expectedOutcomes: [
                  { text: 'רכיבי התעודה משקפים את תפיסת ההכלה' },
                  { 
                    text: 'עלייה בשימוש במגוון כלי הערכה פנימיים:',
                    practiceListTitle: 'בחירת פרקטיקות של תהליכי הערכה ומשוב:',
                    selectablePractices: ['פרקטיקות של תהליכי הערכה ומשוב מכווני שונות', 'אחר']
                  },
                  { text: 'מתקיים שיח ללמידה מנתונים לצורך תכנון תהליכי משוב והערכה מכווני שונות' }
                ]
              },
              {
                id: 'focused_student_work',
                title: 'עבודה עם תלמידים במיקוד',
                expectedOutcomes: [
                  { text: 'שיפור באפקטיביות תכניות העבודה עבור תלמידים במיקוד (שאינם זכאי שירותי חינוך מיוחדים)' }
                ]
              }
            ]
          },
          {
            id: 'arena2',
            title: 'תרבות ומדיניות הכלה בית ספרית',
            subtopics: [
              {
                id: 'inclusive_vision',
                title: 'ביסוס תפיסה מכילה ותרגומה לתהליכים בית-ספריים',
                expectedOutcomes: [
                  { text: 'תכנון המענים בראייה בית ספרית ייעשה בהתאם למודל ה-MTSS' },
                  { 
                    text: 'עלייה בשימוש של צוות המורים במושגים, עקרונות ושיח מעולם ההכלה:',
                    practiceListTitle: 'בחירת מושגים/עקרונות:',
                    selectablePractices: ['הכללה', 'שותפות עם הורים', 'עיצוב אוניברסלי', 'פסיכופדגוגיה', 'יחסי קרבה ואכפתיות', 'תרבות מדיניות ויישום', 'חסמי למידה והשתתפות', 'הורדת זמן מע"מ (צמצום שלב ההקדמה לטובת מקסום זמן הלמידה הפעילה)', 'הכלה פדגוגית', 'תוכנית עבודה מרובדת', 'אחר'] 
                  },
                  { 
                    text: 'הצוות מבנה מדיניות משותפת לביסוס תרבות מכילה ויישומה (להלן מבחר דוגמאות להטמעה):',
                    practiceListTitle: 'דוגמאות להטמעת מדיניות בית-ספרית:',
                    selectablePractices: ['דיאלוג עם ההורים המושתת על עקרונות מכילים (אסיפות הורים, שיחות, הרצאות, ימי שיא, ישיבות הנהגת הורים)', 'דיאלוג בימי הורים המשקף את תפיסת ההכלה', 'ישיבות פדגוגיות מבוססות נתונים ומכוונות לתלמיד השלם', 'יום למידה מסתיים/מתחיל בשיח מצמיח', 'תקנון ו"האני מאמין" של בית הספר משקפים את תפיסת ההכלה', 'רכיבי התעודה משקפים את תפיסת ההכלה']
                  }
                ]
              },
              {
                id: 'data_based_planning',
                title: 'תכנית עבודה בית ספרית מבוססת נתונים',
                expectedOutcomes: [
                  { text: 'ישיבות פדגוגיות מבוססות נתונים ומכוונות לתלמיד השלם' },
                  { text: 'הצוות החינוכי ממפה תלמידים באמצעות כלי מיפוי הוליסטי (העוגן) ובונה תכניות עבודה מבוססות נתונים' },
                  { text: 'תכנון העבודה, קבלת החלטות ובניית תכניות התערבות מבוססים על ניתוח תובנות מנתונים' }
                ]
              },
              {
                id: 'interdisciplinary_team',
                title: 'צוות בין-מקצועי מוביל הכלה',
                expectedOutcomes: [
                  { 
                    text: 'מתקיימת למידת עמיתים במגוון דרכים:',
                    selectablePractices: ['קהילת היוועצות בית ספרית (חקר הפרקטיקה)', 'צפיית עמיתים', 'ישיבות צוותים', 'מליאות מורים', 'מורה חונך מורה', 'סימולציות', 'מרחבי חקר ולמידה למורים', 'אחר'] 
                  },
                  { text: 'מתקיימים שיתופי פעולה בקרב מנהיגות הביניים לקידום יעדי הכלה/הוראה בכיתה הטרוגנית' }
                ]
              },
               {
                id: 'fairness_systemic_view',
                title: 'הוגנות כתפיסה מערכתית',
                expectedOutcomes: [
                  { text: 'עלייה באחוז התלמידים המדווחים על תחושת ביטחון' },
                  { text: 'עלייה באחוז התלמידים המדווחים על תחושת שייכות' },
                  { 
                    text: 'בית הספר מיישם תפיסה של הוגנות במרחבים שונים:',
                    practiceListTitle: 'בחירת פרקטיקות ודגשים ליישום באחד או יותר מהעקרונות הבאים:',
                    selectablePractices: ['אכפתיות', 'גמישות', 'נגישות', 'אמון', 'איכות', 'שקיפות', 'מגוון'] 
                  },
                  { text: 'הפחתת השימוש בפרקטיקות מדירות', isSubOutcome: true },
                  { text: 'ירידה באחוז התלמידים המושעים', isSubOutcome: true },

                ]
              },
              {
                id: 'parent_partnership',
                title: 'שותפות עם הורים וקהילה מנקודת מבט מכילה והוגנת',
                expectedOutcomes: [
                  { text: 'ימי הורים המשקפים הכלה והוגנות' },
                  { text: 'מתן ייצוג להון התרבותי של קהילת בית-הספר (פדגוגיה של זהויות)'},
                  { text: 'שותפות חינוכית עם ההורים' }
                ]
              }
            ]
          },
          {
            id: 'arena3',
            title: 'תחושת מסוגלות הצוות החינוכי',
            subtopics: [
                {
                    id: 'coordinator_guidance',
                    title: 'ליווי רכזת ההכלה בעבודתה',
                    expectedOutcomes: [
                        { text: 'עלייה בתחושת המסוגלות של רכזת ההכלה ליישם את תכנית העבודה שלה' },
                        { text: 'הצלחה ביישום יעדי העבודה של רכזת הכלה בהתאם למסמך אבני דרך' }
                    ]
                },
                {
                    id: 'teacher_knowledge_deepening',
                    title: 'העמקת הידע המקצועי של המורים',
                    expectedOutcomes: [
                        { 
                            text: 'עלייה בשימוש של צוות המורים במושגים, עקרונות ושיח מעולם ההכלה:',
                            practiceListTitle: 'בחירת מושגים/עקרונות:',
                            selectablePractices: ['הכללה', 'שותפות עם הורים', 'עיצוב אוניברסלי', 'פסיכופדגוגיה', 'יחסי קרבה ואכפתיות', 'תרבות מדיניות ויישום', 'חסמי למידה והשתתפות', 'הורדת זמן מע"מ', 'הכלה פדגוגית', 'תוכנית עבודה מרובדת', 'אחר']
                        },
                        { 
                            text: 'הצוות לומד ומתפתח מקצועית בתחום ההכלה (יש לבחור יעדים/נושאים מתוך הרשימה הבאה):',
                            practiceListTitle: 'בחירת יעדים/נושאים להתפתחות מקצועית:',
                            selectablePractices: ['ליווי תלמידים עם בעיות התנהגות', 'ליווי תלמידים עם בעיות קשב', 'המחונן בכיתתו', 'ילדים בסיכון', 'הוראה בכיתה הטרוגנית', 'נוירופדגוגיה', 'הערכה מבוססת מגוון', 'אוכלוסיות ייחודיות', 'הוראה מותאמת פרט', 'ויסות עצמי ללמידה', 'מוטיבציה ללמידה', 'בניית תכניות אישיות ו/או כיתתיות', 'תכנון הוראה מבוססת נתונים', 'כלים טכנו-פדגוגיים']
                        },
                        { text: 'מתקיים שיח ללמידה מנתונים לצורך תכנון העבודה, קבלת החלטות ובניית תכניות התערבות' },
                        { 
                            text: 'מתקיימת למידת עמיתים במגוון דרכים:',
                            selectablePractices: ['קהילת היוועצות בית ספרית (חקר הפרטקטיקה)', 'צפיית עמיתים', 'ישיבות צוותים', 'מליאות מורים', 'מורה חונך מורה', 'סדנאות פיתוח מקצועי', 'השתלמות מוסדית', 'פורמט דיגיטלי לשיתוף חומרים', 'סימולציות', 'מרחבי חקר ולמידה למורים', 'אחר']
                        }
                    ]
                },
                {
                    id: 'teacher_efficacy',
                    title: 'חיזוק תחושת המסוגלות של המורה',
                    expectedOutcomes: [
                        { text: 'עלייה בתחושת המסוגלות של המורים במימדים שונים מקדמי הכלה והוגנות' },
                        { text: 'עלייה בתחושת המסוגלות של המורים לניהול שיח מצמיח עם התלמידים ותחושת אכפתיות' },
                        { text: 'עלייה במספר התלמידים המעורבים בשיעור' }
                    ]
                }
            ]
          },
          {
            id: 'arena4',
            title: 'יחסי קרבה ואכפתיות',
            subtopics: [
              {
                id: 'belonging_involvement',
                title: 'שייכות ומעורבות',
                expectedOutcomes: [
                  { text: 'עלייה באחוז התלמידים המדווחים על תחושת שייכות' },
                  { text: 'עלייה באחוז התלמידים המדווחים על תחושת ביטחון בבית הספר' },
                  { text: 'עלייה בדיווח המורים על היכרות מעמיקה עם תלמידיהם ממגוון נקודות מבט (התלמיד השלם)' }
                ]
              },
              {
                id: 'teacher_student_dialogue',
                title: 'דיאלוג מורה-תלמיד',
                expectedOutcomes: [
                  { 
                    text: 'עלייה בדיווח המורים על שימוש בכלים פסיכופדגוגיים לחיזוק הקשר בין מורה-תלמיד:',
                    selectablePractices: ['"פסיפס"', 'משוב לקידום פסיכופדגוגיה', 'שאלות מוקירות', 'בניית אמון בין מורה לתלמיד', 'ניהול שיח אישי מצמיח', 'מבוגר משמעותי', 'ציפיות גבוהות', 'אחר'] 
                  }
                ]
              }
            ]
          },
          {
            id: 'arena5',
            title: 'סביבת למידה מקדמת הכלה',
            subtopics: [
              {
                id: 'learning_spaces',
                title: 'מרחבי למידה',
                expectedOutcomes: [
                  { 
                    text: 'עלייה בשימוש במגוון מרחבי למידה:',
                    selectablePractices: ['מגוון מרחבים בכיתה', 'מרחבי למידה חוץ כיתתיים', 'מרחבי למידה חוץ בית ספריים', 'מרחבי למידה ירוקים'] 
                  }
                ]
              },
              {
                id: 'techno_pedagogical_tools',
                title: 'כלים טכנו-פדגוגיים',
                expectedOutcomes: [
                  { text: 'עלייה בשימוש בכלים דיגיטליים המסייעים בהסרת חסמי למידה ומגבירים מעורבות' }
                ]
              }
            ]
          }
        ];


        const toggleSelection = (domainId, subtopicId, outcomeIndex) => {
          const key = `${domainId}_${subtopicId}_${outcomeIndex}`;
          setSelectedItems(prev => ({ ...prev, [key]: !prev[key] }));
           if (selectedItems[key]) {
            setSelectedPractices(prev => { const newPractices = { ...prev }; delete newPractices[key]; return newPractices; });
            setCustomPractices(prev => { const newCustom = { ...prev }; delete newCustom[key]; return newCustom; });
          }
        };
        
        const togglePractice = (outcomeKey, practice) => {
          setSelectedPractices(prev => ({
            ...prev,
            [outcomeKey]: { ...prev[outcomeKey], [practice]: !prev[outcomeKey]?.[practice] }
          }));
        };

        const handleCustomPracticeChange = (key, value) => {
            setCustomPractices(prev => ({ ...prev, [key]: value }));
        };

        const toggleGlobalPartner = (partner) => setGlobalPartners(prev => ({ ...prev, [partner]: !prev[partner] }));
        const toggleTrainingPractice = (practice) => setSelectedTrainingPractices(prev => ({ ...prev, [practice]: !prev[practice] }));
        const addCustomGlobalPartner = () => { if (customGlobalPartner.trim()) { setGlobalPartners(prev => ({ ...prev, [customGlobalPartner]: true })); setCustomGlobalPartner(''); } };
        const getSelectedCount = () => Object.values(selectedItems).filter(Boolean).length;

        const handleNavigate = (targetView) => {
            setView(targetView);
            if(contentRef.current) {
                contentRef.current.scrollIntoView({ behavior: 'smooth' });
            }
        };

        const handleNextDomain = () => {
          if (currentDomain < domains.length - 1) {
            setCurrentDomain(currentDomain + 1);
          } else {
            handleNavigate('additionalData');
          }
          if(contentRef.current) {
             contentRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        };

        const handlePrevDomain = () => {
          setCurrentDomain(Math.max(0, currentDomain - 1));
           if(contentRef.current) {
             contentRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        };

        const generateSummary = () => {
          const summary = {};
          const selectedGlobalPartnersList = Object.keys(globalPartners).filter(p => globalPartners[p]);
          let selectedTrainingList = Object.keys(selectedTrainingPractices).filter(p => selectedTrainingPractices[p]);
          // Handle custom 'other' for training practices
          if (selectedTrainingPractices['אחר'] && customPractices['training_other']) {
            selectedTrainingList = selectedTrainingList.filter(p => p !== 'אחר');
            selectedTrainingList.push(`אחר: ${customPractices['training_other']}`);
          }
          
          domains.forEach(domain => {
            domain.subtopics.forEach(subtopic => {
              subtopic.expectedOutcomes.forEach((outcome, index) => {
                const key = `${domain.id}_${subtopic.id}_${index}`;
                if (selectedItems[key]) {
                  if (!summary[domain.title]) summary[domain.title] = {};
                  if (!summary[domain.title][subtopic.title]) summary[domain.title][subtopic.title] = [];
                  let practices = selectedPractices[key] ? Object.keys(selectedPractices[key]).filter(p => selectedPractices[key][p]) : [];
                  if (selectedPractices[key]?.['אחר'] && customPractices[key]) {
                    practices = practices.filter(p => p !== 'אחר');
                    practices.push(`אחר: ${customPractices[key]}`);
                  }
                  summary[domain.title][subtopic.title].push({ outcome: outcome.text, practices: practices });
                }
              });
            });
          });
          return { summary, partners: selectedGlobalPartnersList, trainingPractices: selectedTrainingList };
        };

        const renderView = () => {
            switch(view) {
                case 'summary':
                    const { summary, partners, trainingPractices } = generateSummary();
                    return (
                        <div className="min-h-screen bg-gray-50 p-6 print-container">
                          <div className="max-w-5xl mx-auto">
                            <div className="bg-white rounded-xl shadow-lg p-8 print-content">
                              <div className="text-center mb-8">
                                 <h1 className="text-3xl font-bold text-indigo-800 mb-2">כלי לניהול שיח בין מדריכת הכלה</h1>
                                 <h2 className="text-3xl font-bold text-indigo-800">למנהל/מנהלת בית ספר לתכנון תוכנית הדרכה מותאמת בתחום ההכלה</h2>
                              </div>

                              <div className="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200 text-right space-y-3 page-break-inside-avoid">
                                <h3 className="text-xl font-bold text-gray-800">מידע כללי:</h3>
                                <p><span className="font-semibold">שם בית הספר:</span> {schoolName || "____________________"}</p>
                                <p><span className="font-semibold">שם המנהל/המנהלת:</span> {principalName || "____________________"}</p>
                                <p><span className="font-semibold">שם מדריכת ההכלה:</span> {mentorName || "____________________"}</p>
                                <p><span className="font-semibold">שם רכזת ההכלה:</span> {coordinatorName || "____________________"}</p>
                                <p><span className="font-semibold">מספר שעות הדרכה בהכלה:</span> {guidanceHours || "____________________"}</p>
                                <p><span className="font-semibold">מספר השנים שבית הספר מקבל הדרכה בהכלה:</span> {guidanceYears || "____________________"}</p>
                              </div>

                              <div className="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200 text-right space-y-3 page-break-inside-avoid">
                                <h3 className="text-xl font-bold text-gray-800">נתונים בית-ספריים:</h3>
                                 <p className="text-sm text-gray-600">(בחלק זה יש להציג תמונת מצב נוכחית של בית הספר, מומלץ להתבסס גם על דשבורד המנהל של כלי העוגן).</p>
                                <p className="font-semibold">תיאור העשייה הנוכחית בתחום ההכלה וההוגנות בבית הספר (מה נעשה עד כה, אילו פרקטיקות מיושמות ומוטמעות, אילו מתודות נמצאות בשימוש, באילו תחומים הצוות לומד ומתפתח מקצועית):</p>
                                <p className="whitespace-pre-wrap mt-1 text-gray-700 min-h-[50px]">{schoolData || ""}</p>
                              </div>

                               <div className="mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200 text-right space-y-3 page-break-inside-avoid">
                                <h3 className="text-xl font-bold text-gray-800">תובנות מרכזיות וזיהוי אתגרים:</h3>
                                <p className="font-semibold">מהם האתגרים המרכזיים ולאן שואפים להגיע?</p>
                                <p className="whitespace-pre-wrap mt-1 text-gray-700 min-h-[50px]">{challenges || ""}</p>
                              </div>

                              {Object.keys(summary).length === 0 && (
                                <div className="text-center py-8">
                                  <p className="text-gray-600">לא נבחרו זירות פעולה, תוצרים או פרקטיקות.</p>
                                </div>
                              )}
                              {Object.entries(summary).map(([domainTitle, subtopics]) => (
                                <div key={domainTitle} className="mb-8 page-break-inside-avoid">
                                  <h2 className="text-2xl font-bold text-indigo-700 mb-4 border-b-2 border-indigo-200 pb-2">{domainTitle}</h2>
                                  {Object.entries(subtopics).map(([subtopicTitle, outcomes]) => (
                                    <div key={subtopicTitle} className="mb-6 mr-4 page-break-inside-avoid">
                                      <h3 className="text-xl font-semibold text-indigo-600 mb-3">{subtopicTitle}</h3>
                                      <ul className="list-disc pr-5 space-y-4">
                                      {outcomes.map((item, index) => (
                                        <li key={index} className="mb-4 p-3 bg-gray-50 rounded-lg">
                                            <p className="font-medium text-gray-800">{item.outcome.replace(":", "")}</p>
                                            {item.practices.length > 0 && (
                                            <div className="mt-2">
                                              <p className="text-sm font-medium text-green-700">פרקטיקות ודגשים שנבחרו: </p>
                                              <p className="text-sm text-gray-700">{item.practices.join('; ')}</p>
                                            </div>
                                          )}
                                        </li>
                                      ))}
                                      </ul>
                                    </div>
                                  ))}
                                </div>
                              ))}
                              
                               <div className="mt-8 p-4 bg-green-50 rounded-lg page-break-inside-avoid">
                                  <h2 className="text-lg font-bold text-green-800 mb-3">פרקטיקות הדרכה וליווי של מדריכת ההכלה:</h2>
                                  <p className="text-green-700">{trainingPractices.join('; ')}</p>
                               </div>

                               <div className="mt-4 p-4 bg-blue-50 rounded-lg page-break-inside-avoid">
                                  <h2 className="text-lg font-bold text-blue-800 mb-3">שותפים לקידום תחום ההכלה בבית הספר:</h2>
                                  <p className="text-blue-700">{partners.join(', ')}</p>
                               </div>

                               <div className="mt-4 p-4 bg-gray-50 rounded-lg page-break-inside-avoid">
                                 <h3 className="text-lg font-bold text-gray-800 mb-3">מעני/ משאבי הכלה נוספים:</h3>
                                 <p className="whitespace-pre-wrap mt-1 text-gray-700 min-h-[30px]">{additionalResources || ""}</p>
                               </div>


                              <div className="flex gap-4 mt-8 no-print">
                                <button onClick={() => handleNavigate('additionalData')} className="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">חזרה לעריכה</button>
                                <button onClick={() => window.print()} className="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">🖨️ הדפסה/שמירה</button>
                              </div>
                            </div>
                          </div>
                        </div>
                    );
                case 'additionalData':
                    return (
                        <div className="bg-white rounded-xl shadow-lg p-8 mt-6">
                            <h2 className="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">שלב 3: נתונים נוספים לבניית תכנית העבודה</h2>
                             <div className="space-y-6">
                                <div>
                                    <label className="block text-lg font-bold text-gray-800 mb-3">מעני/ משאבי הכלה נוספים <span className="text-sm font-normal">(הוראה מתקנת, גפ"ן, וכו'):</span></label>
                                    <textarea value={additionalResources} onChange={(e) => setAdditionalResources(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg" rows="3"></textarea>
                                </div>
                                <div className="grid md:grid-cols-2 gap-8">
                                    <div className="p-4 bg-green-50 rounded-lg border border-green-200">
                                         <h3 className="text-lg font-bold text-green-800 mb-3">פרקטיקות הדרכה וליווי של מדריכת ההכלה (יש לבחון מבין הפרקטיקות הבאות):</h3>
                                         <div className="space-y-2">
                                            {teacherTrainingPractices.map(practice => (
                                                <div key={practice}>
                                                  <label className="flex items-center gap-2 text-sm cursor-pointer">
                                                      <input type="checkbox" checked={selectedTrainingPractices[practice] || false} onChange={() => toggleTrainingPractice(practice)} className="rounded border-gray-300 text-green-600 focus:ring-green-500"/>
                                                      <span className="text-gray-700">{practice}</span>
                                                  </label>
                                                  {practice === 'אחר' && selectedTrainingPractices['אחר'] && (
                                                     <input type="text" placeholder="פירוט" value={customPractices['training_other'] || ''} onChange={(e) => handleCustomPracticeChange('training_other', e.target.value)} className="w-full mt-1 p-2 text-sm border-gray-300 rounded"/>
                                                  )}
                                                </div>
                                            ))}
                                         </div>
                                    </div>
                                    <div className="p-4 bg-blue-50 rounded-lg border border-blue-200">
                                         <h3 className="text-lg font-bold text-blue-800 mb-3">שותפים לקידום תחום ההכלה בבית הספר:</h3>
                                         <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                                            {partnersList.map((partner) => (<label key={partner} className="flex items-center gap-2 text-sm cursor-pointer"><input type="checkbox" checked={globalPartners[partner] || false} onChange={() => toggleGlobalPartner(partner)} className="rounded border-gray-300 text-blue-600 focus:ring-blue-500"/><span className="text-gray-700">{partner}</span></label>))}
                                         </div>
                                         <div className="flex gap-2"><input type="text" value={customGlobalPartner} onChange={(e) => setCustomGlobalPartner(e.target.value)} placeholder="הוסף שותף/פה (אחר)" className="flex-1 p-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500"/><button onClick={addCustomGlobalPartner} className="px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors">➕</button></div>
                                    </div>
                                </div>
                            </div>
                            <div className="flex justify-between items-center mt-8">
                                <button onClick={() => handleNavigate('domains')} className="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">חזרה לבחירת זירות פעולה ותוצרים</button>
                                <button onClick={() => handleNavigate('summary')} className="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700">🎯 סיום ויצירת סיכום שיח</button>
                            </div>
                       </div>
                    );
                case 'domains':
                    return (
                        <>
                         <div className="bg-white rounded-xl shadow-lg p-8 mb-6">
                            <h2 className="text-2xl font-bold text-indigo-800 mb-2">שלב 2: בחירת זירות פעולה ותוצרים</h2>
                            <p className="text-sm text-red-600 font-semibold mb-4">הערה חשובה! הבחירה צריכה להיות מותאמת לאינטנסיביות ההדרכה ולאתגרי בית-הספר.</p>
                             <div className="flex flex-wrap gap-2">
                                {domains.map((domain, index) => (<button key={domain.id} onClick={() => setCurrentDomain(index)} className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${currentDomain === index ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>{domain.title}</button>))}
                            </div>
                            <div className="flex justify-between items-center mt-4"><div className="text-sm text-gray-600">זירה {currentDomain + 1} מתוך {domains.length}</div><div className="text-sm text-indigo-600 font-medium">נבחרו {getSelectedCount()} תוצרים</div></div>
                            <div className="w-full bg-gray-200 rounded-full h-2 mt-2"><div className="bg-indigo-600 h-2 rounded-full transition-all duration-300" style={{ width: `${((currentDomain + 1) / domains.length) * 100}%` }}></div></div>
                         </div>
                         <div ref={contentRef} className="bg-white rounded-xl shadow-lg p-8">
                            <div className="mb-6"><h2 className="text-2xl font-bold text-indigo-800 mb-2">{domains[currentDomain].title}</h2></div>
                            <div className="space-y-6">
                              {domains[currentDomain].subtopics.map((subtopic) => (
                                <div key={subtopic.id} className="border border-gray-200 rounded-lg p-6">
                                  <h3 className="text-xl font-semibold text-indigo-700 mb-4">{subtopic.title}</h3>
                                  <div className="space-y-4">
                                    {subtopic.expectedOutcomes.map((outcome, index) => {
                                      const key = `${domains[currentDomain].id}_${subtopic.id}_${index}`;
                                      const isSelected = selectedItems[key];
                                      const hasSelectablePractices = outcome.selectablePractices && outcome.selectablePractices.length > 0;
                                      
                                      return (
                                        <div key={index}>
                                          <div onClick={() => toggleSelection(domains[currentDomain].id, subtopic.id, index)} className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${isSelected ? 'border-indigo-500 bg-indigo-50' : 'border-gray-200 hover:border-indigo-300 hover:bg-gray-50'}`}>
                                            <div className="flex items-start gap-3">
                                              <div className={`w-5 h-5 rounded-full border-2 mt-1 flex-shrink-0 flex items-center justify-center ${isSelected ? 'bg-indigo-600 border-indigo-600' : 'border-gray-400'}`}>{isSelected && <div className="w-2 h-2 bg-white rounded-full"></div>}</div>
                                              <div className="flex-grow">
                                                <span className={`${isSelected ? 'text-indigo-800 font-medium' : 'text-gray-700'}`}>
                                                   {outcome.text}
                                                </span>
                                                {hasSelectablePractices && !isSelected && (
                                                    <p className="mt-2 text-sm font-medium text-indigo-600">
                                                        לחצו לבחירת פרקטיקות ודגשים ליישום:
                                                    </p>
                                                )}
                                              </div>
                                            </div>
                                          </div>
                                           {isSelected && hasSelectablePractices && (
                                            <div className="mr-8 mt-4 space-y-4 bg-gray-50 p-4 rounded-lg">
                                              <div>
                                                <h4 className="text-md font-semibold text-gray-800 mb-3">{outcome.practiceListTitle || 'בחירת פרקטיקות ודגשים ליישום:'}</h4>
                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2">
                                                  {outcome.selectablePractices.map((practice) => (
                                                    <div key={practice}>
                                                      <label className="flex items-center gap-2 text-sm cursor-pointer">
                                                          <input type="checkbox" checked={selectedPractices[key]?.[practice] || false} onChange={() => togglePractice(key, practice)} className="rounded border-gray-300 text-green-600 focus:ring-green-500"/>
                                                          <span className="text-gray-700">{practice}</span>
                                                      </label>
                                                      {practice === 'אחר' && selectedPractices[key]?.['אחר'] && (
                                                        <input type="text" placeholder="פירוט" value={customPractices[key] || ''} onChange={(e) => handleCustomPracticeChange(key, e.target.value)} className="w-full mt-1 p-2 text-sm border-gray-300 rounded"/>
                                                      )}
                                                    </div>
                                                  ))}
                                                </div>
                                              </div>
                                            </div>
                                          )}
                                        </div>
                                      );
                                    })}
                                  </div>
                                </div>
                              ))}
                            </div>

                            <div className="flex justify-between items-center mt-8">
                              <button onClick={handlePrevDomain} disabled={currentDomain === 0} className="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50">הזירה הקודמת</button>
                               <button onClick={() => handleNavigate('initial')} className="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">חזרה למידע הכללי</button>
                              <button onClick={handleNextDomain} className="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                                {currentDomain === domains.length - 1 ? 'המשך לנתונים נוספים' : 'הזירה הבאה'}
                              </button>
                            </div>
                        </div>
                       </>
                    );
                case 'initial':
                default:
                    return (
                        <div className="bg-white rounded-xl shadow-lg p-8 mb-6">
                            <div className="text-center mb-8">
                                 <h1 className="text-3xl font-bold text-indigo-800 mb-2">כלי לניהול שיח בין מדריכת הכלה</h1>
                                 <h2 className="text-3xl font-bold text-indigo-800">למנהל/מנהלת בית ספר לתכנון תוכנית הדרכה מותאמת בתחום ההכלה</h2>
                            </div>
                            
                            <div className="space-y-6">
                                <div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-3 border-b pb-2">שלב 1: מידע כללי, נתונים ותובנות</h3>
                                    <div className="grid md:grid-cols-2 gap-4 mt-4">
                                      <div><label className="block text-sm font-medium text-gray-700 mb-1">שם בית הספר:</label><input type="text" value={schoolName} onChange={(e) => setSchoolName(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                      <div><label className="block text-sm font-medium text-gray-700 mb-1">שם המנהל/המנהלת:</label><input type="text" value={principalName} onChange={(e) => setPrincipalName(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                      <div><label className="block text-sm font-medium text-gray-700 mb-1">שם מדריכת ההכלה:</label><input type="text" value={mentorName} onChange={(e) => setMentorName(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                      <div><label className="block text-sm font-medium text-gray-700 mb-1">שם רכזת ההכלה:</label><input type="text" value={coordinatorName} onChange={(e) => setCoordinatorName(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                      <div><label className="block text-sm font-medium text-gray-700 mb-1">מספר שעות הדרכה בהכלה:</label><input type="text" value={guidanceHours} onChange={(e) => setGuidanceHours(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                      <div><label className="block text-sm font-medium text-gray-700 mb-1">מספר השנים שבית הספר מקבל הדרכה בהכלה:</label><input type="text" value={guidanceYears} onChange={(e) => setGuidanceYears(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg"/></div>
                                    </div>
                                </div>

                                <div>
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">נתונים בית-ספריים:</h3>
                                    <p className="text-sm text-gray-600 mb-2">(בחלק זה יש להציג תמונת מצב נוכחית של בית הספר, מומלץ להתבסס גם על דשבורד המנהל של כלי העוגן).</p>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">תיאור העשייה הנוכחית בתחום ההכלה וההוגנות בבית הספר (מה נעשה עד כה, אילו פרקטיקות מיושמות ומוטמעות, אילו מתודות נמצאות בשימוש, באילו תחומים הצוות לומד ומתפתח מקצועית):</label>
                                    <textarea value={schoolData} onChange={(e) => setSchoolData(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg" rows="4"></textarea>
                                </div>

                                <div>
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">תובנות מרכזיות וזיהוי אתגרים:</h3>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">מהם האתגרים המרכזיים ולאן שואפים להגיע?</label>
                                    <textarea value={challenges} onChange={(e) => setChallenges(e.target.value)} className="w-full p-2 border border-gray-300 rounded-lg" rows="4"></textarea>
                                </div>
                                <div className="text-center mt-6">
                                    <button onClick={() => handleNavigate('domains')} className="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 text-lg">התחלת התכנון ובחירת זירות פעולה ותוצרים</button>
                                </div>
                            </div>
                        </div>
                    );
            }
        };

        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 no-print">
            <div ref={contentRef} className="max-w-6xl mx-auto">
                {renderView()}
            </div>
          </div>
        );
      };

      const container = document.getElementById('root');
      const root = ReactDOM.createRoot(container);
      root.render(<InclusionPlanningTool />);
    </script>

</body>
</html>
